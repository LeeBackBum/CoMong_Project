<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="edu.sm.app.repository.AnswerRepository">

    <!-- 댓글 추가 -->
    <insert id="insertAnswer" parameterType="edu.sm.app.dto.AnswerDto">
        INSERT INTO answer (answer_content, answer_date, user_id, board_id)
        VALUES (#{answerContent}, #{answerDate}, #{userId}, #{boardId})
    </insert>

    <!-- 특정 게시글의 댓글 조회 -->
    <select id="selectAnswersByBoardId" parameterType="int" resultType="edu.sm.app.dto.AnswerDto">
        SELECT answer_id AS answerId,
               answer_content AS answerContent,
               answer_date AS answerDate,
               user_id AS userId,
               board_id AS boardId
        FROM answer
        WHERE board_id = #{boardId}
        ORDER BY answer_date DESC
    </select>

    <!-- 특정 댓글 조회 (Answer ID 기준) -->
    <select id="selectAnswerById" parameterType="int" resultType="edu.sm.app.dto.AnswerDto">
        SELECT answer_id AS answerId,
               answer_content AS answerContent,
               answer_date AS answerDate,
               user_id AS userId,
               board_id AS boardId
        FROM answer
        WHERE answer_id = #{answerId}
    </select>

    <!-- 댓글 삭제 -->
    <delete id="deleteAnswerById" parameterType="int">
        DELETE FROM answer WHERE answer_id = #{answerId}
    </delete>

</mapper>
